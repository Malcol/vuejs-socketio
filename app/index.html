<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body> 
    <div id="chat">
        <ul id="messages">
            <li v-for="message in messages">{{ message }}</li>
        </ul>

        <form v-on:submit.prevent="onSubmit">
            <input v-model="message" placeholder="Write message">
            <button v-on:click="send(message)">Send</button>
        </form>
    </div>      

    <script src="npm/vue/dist/vue.js"></script>
    <script src="npm/socket.io-client/dist/socket.io.js"></script>
    <script src="app.js"></script>
    <script>

        var socket = io();

        var app = new Vue({
            el: '#chat',
            data: {
                messages: [],
                message: ''
            },
            methods: {
                onSubmit: function(event) {
                    event.preventDefault();
                },
                send: function(event) {
                    socket.emit('send-msg', this.message);
                    this.message = '';
                }
            }
        });

        socket.on('read-msg', function(data){
            app.messages.push(data);
        });

        socket.on('user-connected', function(userId) {
            app.messages.push('User ' + userId + ' has been connected');
        });
    </script>
</body>
</html>
